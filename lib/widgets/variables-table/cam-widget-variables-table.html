<table class="cam-table">
  <thead>
    <tr>
      <td ng-repeat="headerName in headerNames" ng-class="'col-' + headerName">
        {{ headers[headerName] }}
      </td>
    </tr>
  </thead>

  <tbody>
    <tr ng-repeat="(v, info) in variables"
        ng-class="[info.valid ? null : 'ng-invalid', info.valid ? null : 'ng-invalid-cam-variable-validator']">
      <td ng-repeat="headerName in headerNames"
          ng-init="variable=info.variable"
          ng-class="[isEditable(headerName) ? 'editable' : null, 'type-' + (info.variable.type || '').toLowerCase(), 'col-' + headerName]"
          ng-switch on="headerName">
        <!-- ................................................................................... -->
        <div ng-switch-when="type"
             ng-if="!isEditable('type')">
          {{ variable.type }}
        </div>
        <select class="form-control"
                ng-switch-when="type"
                ng-if="isEditable('type')"
                ng-model="variable.type"
                ng-options="variableType for variableType in variableTypes track by variableType"
                required>
        </select>
        <!-- ................................................................................... -->


        <!-- ................................................................................... -->
        <div ng-switch-when="name"
             ng-if="!isEditable('name')">
          {{ variable.name }}
        </div>

        <input class="form-control"
               ng-switch-when="name"
               ng-model="variable.name"
               ng-if="isEditable('name')" />
        <!-- ................................................................................... -->


        <!-- ................................................................................... -->
        <div ng-switch-when="value"
             ng-if="!isEditable('value') && variable.type === 'Object'"
             ng-click="editVariableValue(v)"
             class="read-only value-wrapper">
          {{ variable.value }}
        </div>

        <div ng-switch-when="value"
             ng-if="!isEditable('value') && variable.type !== 'Object'"
             class="read-only value-wrapper">
          {{ variable.value }}
        </div>

        <div class="value-wrapper"
             ng-switch-when="value"
             ng-if="isEditable('value')">
          <a ng-click="setNull(v)"
             ng-if="!isNull(v)"
             class="set-null"
             tooltip-append-to-body="true"
             tooltip="Set value to &quot;null&quot;">
            <span class="glyphicon glyphicon-remove"></span>
          </a>

          <input ng-if="isPrimitive(variable.type) && !useCheckbox(variable.type) && !isNull(v)"
                 type="text"
                 class="form-control"
                 ng-model="variable.value"
                 placeholder="Value of the variable" />

          <input ng-if="useCheckbox(variable.type)"
                 type="checkbox"
                 ng-model="variable.value"
                 placeholder="Value of the variable" />

          <a ng-if="variable.type === 'Object' && !isNull(v)"
             ng-click="editVariableValue(v)">
            {{ variable.valueInfo.objectTypeName || '&lt;undefined&gt;' }}
          </a>

          <a ng-if="variable.type !== 'Null' && isNull(v)"
             ng-click="setNonNull(v)"
             class="null-value"
             tooltip-append-to-body="true"
             tooltip="Re-set to previous or default value">
            <span class="null-symbol">&lt;null&gt;</span>
          </a>

          <span ng-if="variable.type === 'Null'"
                class="null-value">
            <span class="null-symbol">&lt;null&gt;</span>
          </span>
        </div><!-- / value-wrapper -->
        <!-- ................................................................................... -->


        <div ng-switch-default ng-bind-html="info.additions[headerName]"></div>
      </td>
    </tr>
  </tbody>
</table>
